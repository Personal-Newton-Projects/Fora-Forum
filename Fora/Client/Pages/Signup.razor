@page "/signup"

@inject IUserManager UserManager
@inject IJSRuntime JSRuntime

<EditForm Model="User" OnSubmit="HandleSubmit"> 
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <InputText @bind-Value="User.Username" Placeholder="Username"></InputText>
    <InputText @bind-Value="User.SignUpPassword" Placeholder="Password"></InputText>
    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>
@code {
    [Parameter]
    public UserModel User { get; set; } = new();
    
    public async Task HandleSubmit()
    {
        //Calls method to
        User.Id = 0;
        User.Interests = new List<InterestModel>();
        User.UserInterests = new List<UserInterestModel>();
        User.Messages = new List<MessageModel>();
        User.Threads = new List<ThreadModel>();
        User.Deleted = false;
        User.Banned = false;
        await UserManager.Create(User);
        await JSRuntime.InvokeAsync<UserModel>("console.log", User);
    }

}
